{% extends "base.html" %}

{% block title %}åˆ†ç±»ç®¡ç† - {{ blog_title }}{% endblock %}

{% block content %}
<div class="container">
    <div class="admin-header">
        <h1><i class="fas fa-tags"></i> åˆ†ç±»ç®¡ç†</h1>
        <a href="{{ url_for('admin_dashboard') }}" class="btn btn-outline">
            <i class="fas fa-arrow-left"></i> è¿”å›åå°
        </a>
    </div>

    <!-- æ–°å»ºåˆ†ç±» -->
    <div class="card">
        <h3>æ–°å»ºåˆ†ç±»</h3>
        <form method="POST" class="form-inline-group">
            <div class="form-group">
                <input type="text" name="name" class="form-control" placeholder="åˆ†ç±»åç§°" required>
            </div>
            <div class="form-group">
                <input type="text" name="description" class="form-control" placeholder="åˆ†ç±»æè¿° (å¯é€‰)">
            </div>
            <div class="form-group">
                <input type="color" name="color" class="form-control form-control-color" value="#3498db">
            </div>
            <div class="form-group">
                <input type="text" name="icon" class="form-control" placeholder="å›¾æ ‡ emoji" value="ğŸ“" maxlength="4">
            </div>
            <button type="submit" class="btn btn-primary">
                <i class="fas fa-plus"></i> åˆ›å»º
            </button>
        </form>
    </div>

    <!-- åˆ†ç±»åˆ—è¡¨ -->
    <div class="card">
        <h3>ç°æœ‰åˆ†ç±»</h3>
        {% if categories %}
        <div class="table-responsive">
            <table class="table">
                <thead>
                    <tr>
                        <th>å›¾æ ‡</th>
                        <th>åç§°</th>
                        <th>Slug</th>
                        <th>æè¿°</th>
                        <th>é¢œè‰²</th>
                        <th>æ–‡ç« æ•°</th>
                        <th>æ“ä½œ</th>
                    </tr>
                </thead>
                <tbody>
                    {% for cat in categories %}
                    <tr>
                        <td>{{ cat.icon }}</td>
                        <td><strong>{{ cat.name }}</strong></td>
                        <td><code>{{ cat.slug }}</code></td>
                        <td>{{ cat.description or '-' }}</td>
                        <td>
                            <span class="color-preview" style="background-color:{{ cat.color }}"></span>
                            {{ cat.color }}
                        </td>
                        <td>{{ cat.posts.count() }}</td>
                        <td>
                            <form action="{{ url_for('delete_category', cat_id=cat.id) }}" method="post"
                                  style="display:inline" onsubmit="return confirm('ç¡®å®šåˆ é™¤åˆ†ç±»ã€Œ{{ cat.name }}ã€å—ï¼Ÿ')">
                                <button type="submit" class="btn btn-sm btn-danger">
                                    <i class="fas fa-trash"></i>
                                </button>
                            </form>
                        </td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
        {% else %}
        <div class="empty-state">
            <p>æš‚æ— åˆ†ç±»ï¼Œè¯·åˆ›å»ºä¸€ä¸ªã€‚</p>
        </div>
        {% endif %}
    </div>
</div>
{% endblock %}
