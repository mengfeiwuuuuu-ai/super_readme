# MyBlob åšå®¢ç³»ç»Ÿ

ä¸€ä¸ªåŸºäº Python Flask çš„ç°ä»£åšå®¢ç³»ç»Ÿï¼Œæ”¯æŒ Markdown æ¸²æŸ“ã€å¤šä¸»é¢˜åˆ‡æ¢ã€ç”¨æˆ·ç®¡ç†ã€æ–‡æ¡£åˆ†ç±»å’Œ GitHub ä»£ç†åŠŸèƒ½ã€‚

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

| åŠŸèƒ½ | æè¿° |
|------|------|
| ğŸ“„ Markdown æ¸²æŸ“ | å®Œæ•´æ”¯æŒ Markdown è¯­æ³•ï¼Œå«ä»£ç é«˜äº®ã€è¡¨æ ¼ã€TOC ç›®å½• |
| ğŸ“ è‡ªåŠ¨æ–‡ä»¶è¯†åˆ« | è‡ªåŠ¨æ‰«æ `posts/` æ–‡ä»¶å¤¹ä¸‹çš„ `.md` æ–‡ä»¶å¹¶å±•ç¤º |
| ğŸ¨ å¤šä¸»é¢˜åˆ‡æ¢ | å†…ç½® 5 ç§ä¸»é¢˜ï¼šLight / Dark / Ocean / Forest / Sunset |
| ğŸ‘¥ ç”¨æˆ·ç®¡ç† | æ³¨å†Œã€ç™»å½•ã€ç®¡ç†å‘˜æƒé™æ§åˆ¶ |
| ğŸ“‚ æ–‡æ¡£åˆ†ç±» | æ”¯æŒå¤šåˆ†ç±»ç®¡ç†ï¼ŒæŒ‰æ–‡ä»¶å¤¹è‡ªåŠ¨åˆ†ç±» |
| ğŸ™ GitHub ä»£ç† | æŸ¥çœ‹ä»“åº“ä¿¡æ¯ã€æ¸²æŸ“ READMEã€æœç´¢ä»“åº“ |
| ğŸ“± å“åº”å¼è®¾è®¡ | å®Œç¾é€‚é…æ¡Œé¢ç«¯å’Œç§»åŠ¨ç«¯ |
| ğŸ” å…¨æ–‡æœç´¢ | æœç´¢æ–‡ç« æ ‡é¢˜å’Œå†…å®¹ |

---

## ğŸ“¦ ç¯å¢ƒè¦æ±‚

- **Python** 3.8 åŠä»¥ä¸Šç‰ˆæœ¬
- **pip** åŒ…ç®¡ç†å™¨

---

## ğŸš€ è¿è¡Œæ­¥éª¤

### ç¬¬ä¸€æ­¥ï¼šè¿›å…¥é¡¹ç›®ç›®å½•

```bash
cd x:\workx\myblob
```

### ç¬¬äºŒæ­¥ï¼šåˆ›å»ºè™šæ‹Ÿç¯å¢ƒï¼ˆæ¨èï¼‰

```bash
# Windows
python -m venv venv
venv\Scripts\activate

# macOS/Linux
python3 -m venv venv
source venv/bin/activate
```

### ç¬¬ä¸‰æ­¥ï¼šå®‰è£…ä¾èµ–

```bash
pip install -r requirements.txt
```

### ç¬¬å››æ­¥ï¼šå¯åŠ¨åº”ç”¨

```bash
python app.py
```

çœ‹åˆ°ä»¥ä¸‹è¾“å‡ºè¡¨ç¤ºå¯åŠ¨æˆåŠŸï¼š
```
==================================================
  MyBlob åšå®¢ å·²å¯åŠ¨!
  è®¿é—®åœ°å€: http://127.0.0.1:5000
  ç®¡ç†åå°: http://127.0.0.1:5000/admin
==================================================
```

### ç¬¬äº”æ­¥ï¼šä½¿ç”¨åšå®¢

1. **æµè§ˆå™¨è®¿é—®** `http://127.0.0.1:5000`
2. **æ³¨å†Œè´¦æˆ·**ï¼šç‚¹å‡»å³ä¸Šè§’ã€Œæ³¨å†Œã€ï¼ˆç¬¬ä¸€ä¸ªæ³¨å†Œçš„ç”¨æˆ·è‡ªåŠ¨æˆä¸ºç®¡ç†å‘˜ï¼‰
3. **ç™»å½•åå°**ï¼šè®¿é—® `http://127.0.0.1:5000/admin`
4. **åŒæ­¥æ–‡ä»¶**ï¼šåœ¨åå°ç‚¹å‡»ã€ŒåŒæ­¥ Markdown æ–‡ä»¶ã€æŒ‰é’®ï¼Œè‡ªåŠ¨å¯¼å…¥ `posts/` æ–‡ä»¶å¤¹ä¸­çš„æ–‡ç« 
5. **å†™æ–‡ç« **ï¼šç‚¹å‡»ã€Œå†™æ–‡ç« ã€ä½¿ç”¨åœ¨çº¿ Markdown ç¼–è¾‘å™¨
6. **åˆ‡æ¢ä¸»é¢˜**ï¼šç‚¹å‡»å¯¼èˆªæ å³ä¾§çš„è°ƒè‰²æ¿å›¾æ ‡ ğŸ¨

---

## ğŸ“ æ·»åŠ  Markdown æ–‡ç« 

å°† `.md` æ–‡ä»¶æ”¾å…¥ `posts/` æ–‡ä»¶å¤¹ï¼š

```
posts/
â”œâ”€â”€ æŠ€æœ¯/                  â† æ–‡ä»¶å¤¹å = åˆ†ç±»å
â”‚   â””â”€â”€ my-article.md
â”œâ”€â”€ ç”Ÿæ´»/
â”‚   â””â”€â”€ diary.md
â”œâ”€â”€ æ•™ç¨‹/
â”‚   â””â”€â”€ guide.md
â””â”€â”€ é¡¹ç›®/
    â””â”€â”€ project.md
```

### Front Matter æ ¼å¼

åœ¨ Markdown æ–‡ä»¶å¤´éƒ¨æ·»åŠ å…ƒæ•°æ®ï¼ˆå¯é€‰ï¼‰ï¼š

```markdown
---
title: æ–‡ç« æ ‡é¢˜
date: 2026-02-22
category: æŠ€æœ¯
tags: python, flask
summary: æ–‡ç« ç®€çŸ­æè¿°
cover: https://example.com/image.jpg
---

# æ­£æ–‡å†…å®¹ä»è¿™é‡Œå¼€å§‹...
```

æ·»åŠ æ–‡ä»¶åï¼Œåœ¨ç®¡ç†åå°ç‚¹å‡»ã€ŒåŒæ­¥ Markdown æ–‡ä»¶ã€å³å¯å¯¼å…¥ã€‚

---

## ğŸ™ GitHub ä»£ç†åŠŸèƒ½

è®¿é—® `http://127.0.0.1:5000/github` ä½¿ç”¨ GitHub ä»£ç†åŠŸèƒ½ï¼š

1. **æŸ¥çœ‹ä»“åº“**ï¼šè¾“å…¥ä»“åº“æ‹¥æœ‰è€…å’Œåç§°ï¼ŒæŸ¥çœ‹ä»“åº“ä¿¡æ¯å’Œ README
2. **æœç´¢ä»“åº“**ï¼šæŒ‰å…³é”®è¯æœç´¢ GitHub ä»“åº“
3. **ç”¨æˆ·ä»“åº“**ï¼šæŸ¥çœ‹æŸä¸ª GitHub ç”¨æˆ·çš„å…¬å¼€ä»“åº“åˆ—è¡¨

å¦‚éœ€æ›´é«˜çš„ API è°ƒç”¨é™åˆ¶ï¼Œå¯è®¾ç½® GitHub Tokenï¼š

```bash
# Windows
set GITHUB_TOKEN=your_github_token_here

# macOS/Linux
export GITHUB_TOKEN=your_github_token_here
```

---

## ğŸ”§ è°ƒè¯•æ­¥éª¤

### 1. å¼€å¯è°ƒè¯•æ¨¡å¼

åº”ç”¨é»˜è®¤ä»¥è°ƒè¯•æ¨¡å¼è¿è¡Œï¼ˆ`debug=True`ï¼‰ï¼Œä»£ç ä¿®æ”¹åä¼šè‡ªåŠ¨é‡å¯ã€‚

### 2. æŸ¥çœ‹æ—¥å¿—

ç»ˆç«¯ä¼šè¾“å‡ºæ‰€æœ‰ HTTP è¯·æ±‚æ—¥å¿—å’Œé”™è¯¯ä¿¡æ¯ï¼š
```
127.0.0.1 - - [22/Feb/2026 10:00:00] "GET / HTTP/1.1" 200 -
```

### 3. æ£€æŸ¥æ•°æ®åº“

ä½¿ç”¨ SQLite å®¢æˆ·ç«¯æŸ¥çœ‹æ•°æ®åº“å†…å®¹ï¼š
```bash
# å®‰è£… sqlite3 å·¥å…·å
sqlite3 blog.db
.tables           # æŸ¥çœ‹æ‰€æœ‰è¡¨
.schema posts     # æŸ¥çœ‹è¡¨ç»“æ„
SELECT * FROM posts;  # æŸ¥çœ‹æ–‡ç« æ•°æ®
```

### 4. å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | è§£å†³æ–¹æ¡ˆ |
|------|---------|
| ç«¯å£è¢«å ç”¨ | ä¿®æ”¹ `app.py` ä¸­çš„ `port=5000` ä¸ºå…¶ä»–ç«¯å£ |
| ä¾èµ–å®‰è£…å¤±è´¥ | ç¡®ä¿ Python >= 3.8ï¼Œå°è¯• `pip install --upgrade pip` |
| æ•°æ®åº“é”™è¯¯ | åˆ é™¤ `blog.db` æ–‡ä»¶é‡æ–°å¯åŠ¨åº”ç”¨ |
| é™æ€èµ„æºä¸åŠ è½½ | æ£€æŸ¥æµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰ 404 é”™è¯¯ |
| GitHub API é™æµ | è®¾ç½® `GITHUB_TOKEN` ç¯å¢ƒå˜é‡ |
| ä¸­æ–‡ä¹±ç  | ç¡®ä¿ Markdown æ–‡ä»¶ä»¥ UTF-8 ç¼–ç ä¿å­˜ |

### 5. é‡ç½®æ•°æ®åº“

```bash
# åˆ é™¤æ•°æ®åº“æ–‡ä»¶
del blog.db      # Windows
rm blog.db       # macOS/Linux

# é‡æ–°å¯åŠ¨åº”ç”¨ï¼Œä¼šè‡ªåŠ¨åˆ›å»ºæ–°æ•°æ®åº“
python app.py
```

### 6. ä½¿ç”¨ Flask Shell è°ƒè¯•

```bash
# è®¾ç½®ç¯å¢ƒå˜é‡
set FLASK_APP=app.py    # Windows
export FLASK_APP=app.py # macOS/Linux

# è¿›å…¥ Flask Shell
flask shell

# åœ¨ Shell ä¸­å¯ä»¥æ“ä½œæ•°æ®åº“
>>> from models import db, User, Post, Category
>>> User.query.all()
>>> Post.query.count()
```

### 7. VS Code è°ƒè¯•é…ç½®

åœ¨ `.vscode/launch.json` ä¸­æ·»åŠ ï¼š

```json
{
    "version": "0.2.0",
    "configurations": [
        {
            "name": "Flask: MyBlob",
            "type": "debugpy",
            "request": "launch",
            "module": "flask",
            "env": {
                "FLASK_APP": "app.py",
                "FLASK_DEBUG": "1"
            },
            "args": ["run", "--host=0.0.0.0", "--port=5000"],
            "jinja": true
        }
    ]
}
```

ç„¶åæŒ‰ `F5` å³å¯å¯åŠ¨è°ƒè¯•ï¼Œæ”¯æŒæ–­ç‚¹è°ƒè¯•ã€‚

---

## ğŸŒ é€šè¿‡ GitHub Pages éƒ¨ç½²ï¼ˆé™æ€å¯¼å‡ºï¼‰

å¦‚éœ€éƒ¨ç½²åˆ° GitHub Pagesï¼Œå¯ä»¥é€šè¿‡ä»¥ä¸‹æ­¥éª¤ï¼š

1. åˆ›å»º GitHub ä»“åº“
2. å°†é¡¹ç›®æ¨é€åˆ°ä»“åº“
3. ä½¿ç”¨ GitHub Actions è‡ªåŠ¨éƒ¨ç½²

æˆ–è€…ä½¿ç”¨å†…ç½®çš„ GitHub ä»£ç†åŠŸèƒ½ç›´æ¥åœ¨æœ¬åœ°å±•ç¤º GitHub ä¸Šçš„å†…å®¹ã€‚

---

## ğŸ“œ é¡¹ç›®ç»“æ„

```
myblob/
â”œâ”€â”€ app.py                          # Flask ä¸»åº”ç”¨ï¼ˆè·¯ç”±ã€è§†å›¾ï¼‰
â”œâ”€â”€ config.py                       # åº”ç”¨é…ç½®
â”œâ”€â”€ requirements.txt                # Python ä¾èµ–
â”œâ”€â”€ pyproject.toml                  # pytest ä¸è¦†ç›–ç‡é…ç½®
â”œâ”€â”€ README.md                       # æœ¬æ–‡ä»¶
â”‚
â”œâ”€â”€ models/
â”‚   â””â”€â”€ __init__.py                 # æ•°æ®åº“æ¨¡å‹ï¼ˆUser, Post, Categoryï¼‰
â”‚
â”œâ”€â”€ utils/
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ markdown_scanner.py         # Markdown æ–‡ä»¶æ‰«æä¸è§£æ
â”‚   â””â”€â”€ github_proxy.py             # GitHub API ä»£ç†
â”‚
â”œâ”€â”€ tests/                          # å•å…ƒæµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ __init__.py
â”‚   â”œâ”€â”€ conftest.py                 # å…±äº« fixturesï¼ˆappã€dbã€clientã€auth è¾…åŠ©ï¼‰
â”‚   â”œâ”€â”€ test_models.py              # æ•°æ®åº“æ¨¡å‹æµ‹è¯•
â”‚   â”œâ”€â”€ test_markdown_scanner.py    # Markdown æ‰«æå·¥å…·æµ‹è¯•
â”‚   â”œâ”€â”€ test_github_proxy.py        # GitHub ä»£ç†æµ‹è¯•ï¼ˆMock HTTPï¼‰
â”‚   â”œâ”€â”€ test_routes.py              # é¡µé¢è·¯ç”±æµ‹è¯•
â”‚   â”œâ”€â”€ test_auth.py                # è®¤è¯è·¯ç”±æµ‹è¯•
â”‚   â”œâ”€â”€ test_admin.py               # ç®¡ç†åå°æµ‹è¯•
â”‚   â”œâ”€â”€ test_api.py                 # API è·¯ç”±æµ‹è¯•
â”‚   â””â”€â”€ test_config.py              # é…ç½®æµ‹è¯•
â”‚
â”œâ”€â”€ templates/                      # Jinja2 HTML æ¨¡æ¿
â”‚   â”œâ”€â”€ base.html                   # åŸºç¡€æ¨¡æ¿ï¼ˆå¯¼èˆªã€é¡µè„šï¼‰
â”‚   â”œâ”€â”€ index.html                  # é¦–é¡µ
â”‚   â”œâ”€â”€ post.html                   # æ–‡ç« è¯¦æƒ…
â”‚   â”œâ”€â”€ category.html               # åˆ†ç±»é¡µ
â”‚   â”œâ”€â”€ login.html                  # ç™»å½•é¡µ
â”‚   â”œâ”€â”€ register.html               # æ³¨å†Œé¡µ
â”‚   â”œâ”€â”€ admin.html                  # ç®¡ç†åå°
â”‚   â”œâ”€â”€ editor.html                 # æ–‡ç« ç¼–è¾‘å™¨
â”‚   â”œâ”€â”€ categories_admin.html       # åˆ†ç±»ç®¡ç†
â”‚   â”œâ”€â”€ users_admin.html            # ç”¨æˆ·ç®¡ç†
â”‚   â”œâ”€â”€ profile.html                # ä¸ªäººèµ„æ–™
â”‚   â”œâ”€â”€ github.html                 # GitHub æµè§ˆå™¨
â”‚   â””â”€â”€ error.html                  # é”™è¯¯é¡µ
â”‚
â”œâ”€â”€ static/
â”‚   â”œâ”€â”€ css/
â”‚   â”‚   â”œâ”€â”€ style.css               # ä¸»æ ·å¼ï¼ˆå« 5 ç§ä¸»é¢˜ï¼‰
â”‚   â”‚   â””â”€â”€ markdown.css            # Markdown æ¸²æŸ“æ ·å¼
â”‚   â””â”€â”€ js/
â”‚       â””â”€â”€ main.js                 # å‰ç«¯äº¤äº’é€»è¾‘
â”‚
â””â”€â”€ posts/                          # Markdown æ–‡ç« ç›®å½•
    â”œâ”€â”€ æŠ€æœ¯/
    â”‚   â””â”€â”€ flask-blog-guide.md
    â”œâ”€â”€ æ•™ç¨‹/
    â”‚   â””â”€â”€ markdown-cheatsheet.md
    â”œâ”€â”€ ç”Ÿæ´»/
    â”‚   â””â”€â”€ efficiency-tools.md
    â””â”€â”€ é¡¹ç›®/
        â””â”€â”€ myblob-introduction.md
```

---

## ğŸ§ª å•å…ƒæµ‹è¯•

é¡¹ç›®åŒ…å«å®Œæ•´çš„å•å…ƒæµ‹è¯•å¥—ä»¶ï¼Œä½¿ç”¨ **pytest** æ¡†æ¶ï¼Œå…± **172 ä¸ªæµ‹è¯•ç”¨ä¾‹**ï¼Œæ•´ä½“ä»£ç è¦†ç›–ç‡ **86%**ã€‚

### æµ‹è¯•ç»“æœæ€»è§ˆ

| æµ‹è¯•æ–‡ä»¶ | æµ‹è¯•ç±» | æµ‹è¯•æ•° | è¦†ç›–å†…å®¹ |
|----------|--------|--------|----------|
| `tests/conftest.py` | â€” | â€” | å…±äº« fixturesï¼šappã€dbã€clientã€auth è¾…åŠ©ã€ç¤ºä¾‹æ•°æ® |
| `tests/test_models.py` | 3 ç±» | 21 | User/Post/Category æ¨¡å‹ï¼šCRUDã€å¯†ç å“ˆå¸Œã€å”¯ä¸€çº¦æŸã€å…³ç³»ã€åºåˆ—åŒ– |
| `tests/test_markdown_scanner.py` | 5 ç±» | 28 | front matter è§£æã€slug ç”Ÿæˆã€æ‘˜è¦ç”Ÿæˆã€æ–‡ä»¶å¤¹æ‰«æã€åˆ†ç±»æå– |
| `tests/test_github_proxy.py` | 7 ç±» | 16 | GitHubProxy æ‰€æœ‰æ–¹æ³•ï¼ˆMock HTTPï¼Œæ— éœ€ç½‘ç»œï¼‰ |
| `tests/test_routes.py` | 4 ç±» | 15 | é¦–é¡µã€æ–‡ç« é¡µã€åˆ†ç±»é¡µã€404/403 é”™è¯¯é¡µ |
| `tests/test_auth.py` | 4 ç±» | 18 | ç™»å½•/æ³¨å†Œ/ç™»å‡º/ä¸ªäººèµ„æ–™ï¼šæˆåŠŸ/å¤±è´¥/æƒé™éªŒè¯ |
| `tests/test_admin.py` | 5 ç±» | 24 | ç®¡ç†åå°ã€ç¼–è¾‘å™¨ã€åˆ†ç±»ç®¡ç†ã€ç”¨æˆ·ç®¡ç†ã€æ–‡ç« åŒæ­¥ |
| `tests/test_api.py` | 4 ç±» | 18 | ä¸»é¢˜åˆ‡æ¢ã€æ–‡ç« åˆ—è¡¨ã€Markdown é¢„è§ˆã€GitHub ä»£ç†è·¯ç”± |
| `tests/test_config.py` | 4 ç±» | 14 | åŸºç¡€é…ç½®ã€å¼€å‘/ç”Ÿäº§ç¯å¢ƒã€é…ç½®æ˜ å°„ |

### ä»£ç è¦†ç›–ç‡

| æ¨¡å— | è¦†ç›–ç‡ |
|------|--------|
| `config.py` | **100%** |
| `models/__init__.py` | **100%** |
| `utils/markdown_scanner.py` | **95%** |
| `utils/github_proxy.py` | **89%** |
| `app.py` | **82%** |
| **æ€»è®¡** | **86%** |

### è¿è¡Œæµ‹è¯•

```bash
# å®‰è£…æµ‹è¯•ä¾èµ–
pip install pytest pytest-cov

# è¿è¡Œå…¨éƒ¨æµ‹è¯•
python -m pytest tests/ -v

# è¿è¡Œå•ä¸ªæµ‹è¯•æ–‡ä»¶
python -m pytest tests/test_models.py -v

# è¿è¡ŒæŒ‡å®šæµ‹è¯•ç±»
python -m pytest tests/test_auth.py::TestLogin -v

# è¿è¡Œå•ä¸ªæµ‹è¯•
python -m pytest tests/test_auth.py::TestLogin::test_login_success -v

# æŸ¥çœ‹è¦†ç›–ç‡æŠ¥å‘Šï¼ˆç»ˆç«¯ï¼‰
python -m pytest tests/ --cov=. --cov-report=term-missing

# ç”Ÿæˆ HTML è¦†ç›–ç‡æŠ¥å‘Š
python -m pytest tests/ --cov=. --cov-report=html
# ç„¶åæ‰“å¼€ htmlcov/index.html æŸ¥çœ‹
```

### åœ¨ VS Code ä¸­è¿è¡Œæµ‹è¯•

1. æ‰“å¼€ä»»æ„æµ‹è¯•æ–‡ä»¶ï¼Œç‚¹å‡»æµ‹è¯•å‡½æ•°æ—çš„ç»¿è‰²ä¸‰è§’æŒ‰é’®ç›´æ¥è¿è¡Œ/è°ƒè¯•å•ä¸ªæµ‹è¯•
2. ä½¿ç”¨ **Testing** é¢æ¿ï¼ˆä¾§è¾¹æ çƒ§æ¯å›¾æ ‡ï¼‰æµè§ˆå¹¶è¿è¡Œæ‰€æœ‰æµ‹è¯•
3. æŒ‰ `F5` é…åˆ launch.json å¯ä»¥æ–­ç‚¹è°ƒè¯•æµ‹è¯•ç”¨ä¾‹

---

## ğŸ“„ License

MIT License
